{% extends "base.html" %}

{% block content %}
<div class="px-4 py-6 sm:px-0">
    <div class="flex justify-between items-center mb-8">
        <h1 class="text-3xl font-extrabold text-scout-800 tracking-tight">Modifica Terreno</h1>
        <a href="/admin/terreni" class="text-scout-600 hover:text-scout-800 font-bold">← Torna alla lista</a>
    </div>

    <!-- Edit Form -->
    <div class="glass p-6 rounded-lg shadow-sm border-l-4 border-scout-500 mb-8">
        <form action="/admin/terreni/{{ terreno.id }}" method="post" class="space-y-4">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-bold text-gray-700">Nome Terreno</label>
                    <input type="text" name="name" value="{{ terreno.name }}" required
                        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-scout-500 focus:ring-scout-500 sm:text-sm p-2 bg-white/80">
                </div>
                <div>
                    <label class="block text-sm font-bold text-gray-700">Tags</label>
                    <input type="text" name="tags" value="{{ terreno.tags }}" required
                        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-scout-500 focus:ring-scout-500 sm:text-sm p-2 bg-white/80">
                </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div>
                    <label class="block text-sm font-bold text-gray-700">Latitudine</label>
                    <input type="text" name="center_lat" value="{{ terreno.center_lat }}" required
                        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-scout-500 focus:ring-scout-500 sm:text-sm p-2 bg-white/80">
                </div>
                <div>
                    <label class="block text-sm font-bold text-gray-700">Longitudine</label>
                    <input type="text" name="center_lon" value="{{ terreno.center_lon }}" required
                        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-scout-500 focus:ring-scout-500 sm:text-sm p-2 bg-white/80">
                </div>
                <div>
                    <label class="block text-sm font-bold text-gray-700">Poligono (JSON)</label>
                    <input type="text" name="polygon" value="{{ terreno.polygon }}" required
                        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-scout-500 focus:ring-scout-500 sm:text-sm p-2 bg-white/80">
                </div>
            </div>
            <div class="flex justify-end">
                <button type="submit"
                    class="flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-bold text-white bg-scout-600 hover:bg-scout-700">
                    Salva Modifiche
                </button>
            </div>
        </form>
    </div>

    <!-- Reservations List -->
    <div class="glass shadow overflow-hidden border-b border-gray-200 sm:rounded-lg overflow-x-auto">
        <div class="px-4 py-5 sm:px-6 bg-scout-100/80 border-b border-scout-200">
            <h3 class="text-lg leading-6 font-bold text-scout-900">Prenotazioni</h3>
        </div>
        <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-white/50">
                <tr>
                    <th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Unità</th>
                    <th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Inizio</th>
                    <th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Durata</th>
                    <th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">Stato</th>
                </tr>
            </thead>
            <tbody class="bg-white/60 divide-y divide-gray-200">
                {% for p in prenotazioni %}
                <tr>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{{ p.unita.name }}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ p.start_time.strftime('%d/%m/%Y
                        %H:%M') }}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ p.duration }}h</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm">
                        <span
                            class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                            {% if p.status == 'APPROVED' %}bg-green-100 text-green-800{% else %}bg-yellow-100 text-yellow-800{% endif %}">
                            {{ p.status }}
                        </span>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}